<!DOCTYPE HTML> 
<html> 
    <head> 
        <title> 
            UGV GUI
        </title>
        <link rel="stylesheet" href='/static/main.css' />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head> 
      
    <body>    
        
        <div class="main-div text-center mt-3">
            <h1> 
                UGV Pat++
            </h1> 
            <div class="container d-flex align-items-center justify-content-center">
                <div class="d-flex align-items-center justify-content-center mt-3">
                    <button type="button" class="btn btn-success btn-lg mt-2" onclick = "start_moving()"> 
                        Get Floor Plan
                    </button>

                    <button type="button" class="btn btn-primary btn-lg mt-2" onclick = "find_exit()"> 
                        Find Exit
                    </button>

                    <button type="button" class="btn btn-primary btn-lg mt-2" onclick = "show_map()"> 
                        Show Map
                    </button>

                    <button type="button" class="btn btn-danger btn-md mt-2" onclick = "cancel_mapping()"> 
                        Call Back
                    </button>
                </div>
            </div>
        </div>
          
          
        <script>
              
            function start_moving() {
                var url = "http://127.0.0.1:5000/";

                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
  
                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader("Content-Type", "application/json");
    
                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
    
                        // Print received data from server
                        result.innerHTML = this.responseText;
    
                    }
                };
    
                // Converting JSON data to string
                var data = JSON.stringify({ "command": "move" });
    
                // Sending data with the request
                xhr.send(data);
            }
            
            function cancel_mapping() {
                var url = "http://127.0.0.1:5000/";

                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
  
                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader("Content-Type", "application/json");
    
                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
    
                        // Print received data from server
                        result.innerHTML = this.responseText;
    
                    }
                };
    
                // Converting JSON data to string
                var data = JSON.stringify({ "command":"cancel-map" });
    
                // Sending data with the request
                xhr.send(data);
            } 

            function find_exit() {
                var url = "http://127.0.0.1:5000/";

                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
  
                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader("Content-Type", "application/json");
    
                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
    
                        // Print received data from server
                        result.innerHTML = this.responseText;
    
                    }
                };
    
                // Converting JSON data to string
                var data = JSON.stringify({ "command":"find-exit" });
    
                // Sending data with the request
                xhr.send(data);
            } 
            function show_map() {
                var url = "http://127.0.0.1:5000/";

                var xhr = new XMLHttpRequest();
                xhr.open("GET", url, true);
  
                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader("Content-Type", "application/json");
    
                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
    
                        // Print received data from server
                        result.innerHTML = this.responseText;
    
                    }
                };
    
                // Converting JSON data to string
                var data = JSON.stringify({ "command":"return-map" });
    
                // Sending data with the request
                xhr.send(data);
            }
        </script> 
    </body> 
</html>